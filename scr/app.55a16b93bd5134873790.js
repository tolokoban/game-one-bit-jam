(()=>{"use strict";var t,e={719:(t,e,n)=>{n.d(e,{Z:()=>l});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,"body,\nhtml,\ncanvas#canvas {\n    position: absolute;\n    left: 0;\n    top: 0;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    height: 100%;\n    background: #000;\n    color: #fff;\n}\n",""]);const l=a},971:(t,e,n)=>{function r(t,e){var n=t.createProgram();if(!n)throw Error("Unable to create a WebGL Program!");var r=o(t,"vertex",e.vert);t.attachShader(n,r);var i=o(t,"fragment",e.frag);if(t.attachShader(n,i),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){console.log("Vertex Shader:"),console.log("%c".concat(e.vert),"font-family:monospace;font-size:80%"),console.log("Fragment Shader:"),console.log("%c".concat(e.frag),"font-family:monospace;font-size:80%");var a=t.getProgramInfoLog(n);throw console.warn(a),new Error("Could NOT link WebGL2 program!\n"+a)}return n}function o(t,e,n){var r=t.createShader("vertex"===e?t.VERTEX_SHADER:t.FRAGMENT_SHADER);if(!r)throw Error("Unable to create a Vertex Shader handle!");return t.shaderSource(r,n),t.compileShader(r),r}function i(t,e,n){var r=t.getUniformLocation(e,n);if(!r)throw Error('Unable to find uniform "'.concat(n,'"!'));return r}const a=function(){function t(t,e){var n=this;this.gl=t,this.lastWidth=0,this.lastHeight=0,this.matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.x=0,this.y=0,this.alpha=.5,this.zoom=5,this.size=.05,this.red=0,this.green=0,this.blue=0,this.paint=function(t){var e=n,r=e.gl,o=e.prg,i=e.vao,a=e.count,c=e.uniTime,s=e.uniSize,u=e.uniAlpha,h=e.uniColor,f=e.uniMatrix,v=e.red,d=e.green,p=e.blue,g=e.alpha,m=e.size;n.checkSize(),n.updateMatrix(),r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE),r.useProgram(o),r.uniform1f(c,.2*(t+l)),r.uniform1f(s,m),r.uniform1f(u,g),r.uniform3f(h,v,d,p),r.uniformMatrix4fv(f,!0,n.matrix),r.bindVertexArray(i),r.drawArrays(r.POINTS,0,a)},this.prg=r(t,{vert:"#version 300 es\n\nprecision mediump float ;\n\nuniform float uniTime;\nuniform float uniSize;\nuniform float uniAlpha;\nuniform vec3 uniColor;\nuniform mat4 uniMatrix;\nlayout (location=0) in vec4 attParticle;\nout vec4 varColor;\n\nvoid main() {\n    float t = fract(uniTime * attParticle.w);\n    float life = 1.0 - t;\n    float alpha = attParticle.z * life;\n    varColor = vec4(uniColor, alpha * uniAlpha);\n    float b = 1.0 / 4.0;\n    float a = -5.0 * b;\n    float windFactor = a * t * t + b * t;\n    vec2 wind = vec2(-uniSize, 0.0) * windFactor;\n    gl_Position = uniMatrix * vec4(attParticle.xy + wind, 1.0, 1.0);\n    gl_PointSize = 1.0 + life * 5.0;\n}",frag:"#version 300 es\n\nprecision mediump float ;\n\nin vec4 varColor;\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = varColor;\n}\n\n"}),this.uniTime=i(t,this.prg,"uniTime"),this.uniSize=i(t,this.prg,"uniSize"),this.uniAlpha=i(t,this.prg,"uniAlpha"),this.uniColor=i(t,this.prg,"uniColor"),this.uniMatrix=i(t,this.prg,"uniMatrix");var o=t.createBuffer();if(!o)throw Error("Unable to create Buffer!");t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);var a=t.createVertexArray();if(!a)throw Error("Unable to create VAO!");t.bindVertexArray(a),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,4,t.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,0),t.bindVertexArray(null),this.gl=t,this.vao=a,this.count=e.length>>2,console.log("Particles count:",this.count)}return t.prototype.checkSize=function(){var t=this,e=t.gl,n=t.lastWidth,r=t.lastHeight,o=e.canvas,i=o.clientWidth,a=o.clientHeight;i===n&&a===r||(this.lastWidth=i,this.lastHeight=a,o.width=i,o.height=a,e.viewport(0,0,i,a))},t.prototype.updateMatrix=function(){var t=this,e=t.matrix,n=t.x,r=t.y,o=t.zoom,i=t.lastWidth,a=t.lastHeight,l=i>a?o*a/i:o,f=a>i?o*i/a:o;e[c]=l,e[s]=f,e[u]=-n*l,e[h]=-r*f},t}();var l=1e6,c=0,s=5,u=3,h=7;const f=function(){function t(t,e,n,o,a){var l=this;this.gl=t,this.red=e,this.green=n,this.blue=o,this.size=a,this.lastWidth=0,this.lastHeight=0,this.paint=function(t){var e=l,n=e.gl,r=e.prg,o=e.uniSize,i=e.uniColor,a=e.red,c=e.green,s=e.blue,u=e.size;l.checkSize(),n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE),n.useProgram(r),n.uniform1f(o,u*Math.min(l.lastWidth,l.lastHeight)),n.uniform3f(i,a,c,s),n.drawArrays(n.POINTS,0,1)},this.prg=r(t,{vert:"#version 300 es\n\nprecision mediump float ;\n\nuniform float uniSize;\nuniform vec3 uniColor;\nout vec3 varColor;\n\nvoid main() {\n    varColor = uniColor;\n    gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n    gl_PointSize = uniSize;\n}",frag:"#version 300 es\n\nprecision mediump float ;\n\nin vec3 varColor;\nout vec4 FragColor;\n\nvoid main() {\n    vec2 v = (2.0 * gl_PointCoord - vec2(1));\n    float r = length(v);\n    float alpha = 1.0 - smoothstep(0.9, 1.0, r);\n    FragColor = vec4(varColor, alpha);\n}\n\n"}),this.uniSize=i(t,this.prg,"uniSize"),this.uniColor=i(t,this.prg,"uniColor")}return t.prototype.checkSize=function(){var t=this,e=t.gl,n=t.lastWidth,r=t.lastHeight,o=e.canvas,i=o.clientWidth,a=o.clientHeight;i===n&&a===r||(this.lastWidth=i,this.lastHeight=a,o.width=i,o.height=a,e.viewport(0,0,i,a))},t}();var v=n(477);var d=n(867),p=n(854),g=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function l(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=e.call(t,a)}catch(t){l=[6,t],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};function b(t,e){return void 0===e&&(e=!1),g(this,void 0,void 0,(function(){var n,r,o,i;return m(this,(function(a){switch(a.label){case 0:return(n=new p._).setDecoderPath("./draco/"),(r=new d.E).setDRACOLoader(n),[4,r.loadAsync(t)];case 1:return o=a.sent(),i=[],o.scene.traverseVisible((function(t){if(t instanceof v.Kj0&&t.isMesh){var n=t.geometry;e&&n.computeVertexNormals(),i.push(t)}})),[2,i]}}))}))}var w=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function y(t,e,n,r){var o,i,a,l,c=r.distance,s=void 0===c?15:c,u=r.x,h=void 0===u?0:u,f=r.y,d=void 0===f?0:f;return o=this,i=void 0,l=function(){var r,o,i,a,l,c,u,f,p,g,m,y,x,S,C,A,E,P,z,_,k,O;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=e.call(t,a)}catch(t){l=[6,t],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}(this,(function(F){switch(F.label){case 0:if((r=document.createElement("canvas")).width=e,r.height=n,!(o=r.getContext("webgl2")))throw Error("Unable to get WebGL2 context!");i=new v.CP7({canvas:r,context:o}),(a=new v.iKG(-s,+s,+s,-s)).position.set(100,100,100),a.lookAt(new v.Pa4(0,0,0)),a.position.x+=h,a.position.z+=-d,l=new v.xsS,c=new v.jyz({vertexShader:"varying vec3 varColor;\n\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vec3 n = mat3(modelViewMatrix) * normal;\n    float lightMain = smoothstep(0.25, 1.0, max(0.0, dot(n, normalize(vec3(1, 0.3, 0)))));\n    float lightBack = smoothstep(0.5, 1.0, max(0.0, dot(n, normalize(vec3(-1, 0.5, 0)))));\n    float lightRim = smoothstep(0.5, 1.0, max(0.0, dot(n, normalize(vec3(0, -1, 0)))));\n    varColor = vec3(pow(lightMain, 1.0) + 0.5 * lightBack + 0.5 * lightRim);\n    // varColor.g = 0.0;\n    varColor.b = gl_Position.z / gl_Position.w;\n}",fragmentShader:"varying vec3 varColor;\n\nvoid main() {\n    gl_FragColor = vec4(varColor, 1.0);\n}\n\n"}),F.label=1;case 1:return F.trys.push([1,6,7,8]),[4,b(t)];case 2:u=w.apply(void 0,[F.sent()]),f=u.next(),F.label=3;case 3:if(f.done)return[3,5];(p=f.value).material=c,l.add(p),F.label=4;case 4:return f=u.next(),[3,3];case 5:return[3,8];case 6:return g=F.sent(),k={error:g},[3,8];case 7:try{f&&!f.done&&(O=u.return)&&O.call(u)}finally{if(k)throw k.error}return[7];case 8:if(i.render(l,a),(m=document.createElement("canvas")).width=r.width,m.height=r.height,!(y=m.getContext("2d")))throw Error("Unable to get 2D context!");for(y.drawImage(r,0,0),x=y.getImageData(0,0,r.width,r.height),S=0,C=[],A=2/x.width,E=2/x.height,P=0;P<x.height;P++)for(z=0;z<x.width;z++)_=x.data[S],S+=4,_<1||C.push(z*A-1+Math.random()*A,1-P*E+Math.random()*E,1*_/255,1/(500+1500*Math.random()));return[2,new Float32Array(C)]}}))},new((a=void 0)||(a=Promise))((function(t,e){function n(t){try{c(l.next(t))}catch(t){e(t)}}function r(t){try{c(l.throw(t))}catch(t){e(t)}}function c(e){var o;e.done?t(e.value):(o=e.value,o instanceof a?o:new a((function(t){t(o)}))).then(n,r)}c((l=l.apply(o,i||[])).next())}))}var x=n(379),S=n.n(x),C=n(795),A=n.n(C),E=n(569),P=n.n(E),z=n(565),_=n.n(z),k=n(216),O=n.n(k),F=n(589),T=n.n(F),M=n(719),N={};N.styleTagTransform=T(),N.setAttributes=_(),N.insert=P().bind(null,"head"),N.domAPI=A(),N.insertStyleElement=O(),S()(M.Z,N),M.Z&&M.Z.locals&&M.Z.locals;!function(){var t,e,n,r;t=this,e=void 0,r=function(){var t,e,n,r,o,i,l,c,s,u;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=e.call(t,a)}catch(t){l=[6,t],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}(this,(function(h){switch(h.label){case 0:if(!(t=document.getElementById("canvas")))throw Error("No canvas with id #canvas!");if(!(e=t.getContext("webgl2")))throw Error("Unable to get WebGL2 context!");return[4,y("./mesh/level1.glb",n=1*(screen.availWidth+screen.availHeight),n,{distance:15,x:8,y:9})];case 1:return r=h.sent(),(o=new a(e,r)).alpha=.2,o.size=.05,o.zoom=5,[4,y("./mesh/pacman.glb",.04*n,.04*n,{distance:1.5})];case 2:if(i=h.sent(),(l=new a(e,i)).alpha=.8,l.size=1,l.zoom=.2,c=new f(e,.8,.7,.5,.16),s=function(t){e.clearColor(.8,.7,.5,1),e.clear(e.COLOR_BUFFER_BIT),o.paint(t),c.paint(t),l.paint(t),window.requestAnimationFrame(s)},window.requestAnimationFrame(s),!(u=document.getElementById("splash-screen")))throw Error("Unable to find element #splash-screen!");return u.classList.add("vanish"),window.setTimeout((function(){var t;return null===(t=u.parentNode)||void 0===t?void 0:t.removeChild(u)}),1e3),[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function l(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((r=r.apply(t,e||[])).next())}))}()}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={id:t,exports:{}};return e[t](i,i.exports,r),i.exports}r.m=e,t=[],r.O=(e,n,o,i)=>{if(!n){var a=1/0;for(u=0;u<t.length;u++){for(var[n,o,i]=t[u],l=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(l=!1,i<a&&(a=i));if(l){t.splice(u--,1);var s=o();void 0!==s&&(e=s)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,o,i]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={143:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,i,[a,l,c]=n,s=0;if(a.some((e=>0!==t[e]))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(c)var u=c(r)}for(e&&e(n);s<a.length;s++)i=a[s],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),r.nc=void 0;var o=r.O(void 0,[926],(()=>r(971)));o=r.O(o)})();